(this["webpackJsonpikuinen-webbikoodaus"]=this["webpackJsonpikuinen-webbikoodaus"]||[]).push([[0],{139:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(59),s=a.n(o),c=(a(71),a(4)),u=(a(72),a(2)),i=a.n(u),l=a(60),f=a.n(l);function p(e,t){var a,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.a.awrap(t.async("arraybuffer"));case 2:return a=r.sent,r.next=5,i.a.awrap(e.decodeAudioData(a));case 5:return n=r.sent,r.abrupt("return",{name:t.name,audioBuffer:n});case 7:case"end":return r.stop()}}))}var v=a(61),h=a(62),d=a(63),b=a.n(d),m=a(64),y=a.n(m),k=function(){function e(t,a){var n=this;Object(v.a)(this,e),this.ctx=void 0,this.samples=void 0,this.convolverGainNode=void 0,this.convolverNode=void 0,this.dryGainNode=void 0,this.sampleNameHistory=[],this.speed=1,this.isPlaying=!1,this.newSampleCallback=void 0,this.playNextSample=function(){if(n.isPlaying){var e=n.pickNextSample();if(e){var t=n.ctx.createBufferSource();t.playbackRate.value=n.speed,t.buffer=e.audioBuffer,t.onended=function(){n.playNextSample()},t.connect(n.dryGainNode),n.convolverGainNode.gain.value>0&&t.connect(n.convolverGainNode),t.start(),n.newSampleCallback&&n.newSampleCallback()}else n.stop()}},this.ctx=t,this.samples=a,this.dryGainNode=t.createGain(),this.dryGainNode.connect(t.destination),this.convolverNode=t.createConvolver(),this.convolverNode.connect(t.destination),this.convolverGainNode=t.createGain(),this.convolverGainNode.connect(this.convolverNode)}return Object(h.a)(e,[{key:"setConvolutionSample",value:function(e){this.convolverNode.buffer=e.audioBuffer}},{key:"start",value:function(){this.isPlaying||(this.isPlaying=!0,this.playNextSample())}},{key:"stop",value:function(){this.isPlaying=!1}},{key:"setParameters",value:function(e,t,a){this.speed=e,this.convolverGainNode.gain.value=t,this.dryGainNode.gain.value=a}},{key:"pickNextSample",value:function(){for(var e,t=0;t<10&&((e=b()(this.samples))&&this.sampleNameHistory.includes(e.name));t++);return e&&(this.sampleNameHistory.push(e.name),this.sampleNameHistory.length>=25&&this.sampleNameHistory.shift()),e}}]),e}(),O=function(e){var t=e.samples,a=e.ctx,n=e.convolutionSample,o=e.convolutionGain,s=e.dryGain,u=e.speed,i=r.a.useState(0),l=Object(c.a)(i,2),f=l[0],p=l[1],v=r.a.useState(!1),h=Object(c.a)(v,2),d=h[0],b=h[1],m=r.a.useState(),O=Object(c.a)(m,2),R=O[0],x=O[1];r.a.useEffect((function(){var e=new k(a,t);return x(e),function(){return e.stop()}}),[a,t]),r.a.useEffect((function(){n&&R&&R.setConvolutionSample(n)}),[R,n]),r.a.useEffect((function(){R&&R.setParameters(u,o,s)}),[R,u,o,s]),r.a.useEffect((function(){R&&(R.newSampleCallback=function(){return p(30*Math.random()-15)})}),[R,p]);return r.a.createElement("button",{onClick:function(){R&&!d&&(b(!0),R.start())},disabled:d,style:{transform:d?"rotate(".concat(f,"deg)"):void 0}},r.a.createElement("img",{src:y.a,alt:"Logo"}))},R=a(65),x=function(e){var t=e.label,a=e.suffix,n=Object(R.a)(e,["label","suffix"]);return r.a.createElement("label",null,t,": ",r.a.createElement("input",n)," ",a)},N=new AudioContext,w=[["bathroom","Bathroom"],["bedroom","Bedroom"],["cathedral","Cathedral"],["tunnel","Tunnel"],["forest","Forest"],["glitterspace","Glitter Space"],["kaukana","Kaukana"]],G=function(){var e=r.a.useState(),t=Object(c.a)(e,2),a=t[0],n=t[1],o=r.a.useState("bedroom"),s=Object(c.a)(o,2),u=s[0],l=s[1],v=r.a.useState(),h=Object(c.a)(v,2),d=h[0],b=h[1],m=r.a.useState(0),y=Object(c.a)(m,2),k=y[0],R=y[1],G=r.a.useState(1),E=Object(c.a)(G,2),Z=E[0],C=E[1],J=r.a.useState(1),P=Object(c.a)(J,2),V=P[0],g=P[1];return r.a.useEffect((function(){(function(e,t){var a,n,r,o;return i.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,i.a.awrap(fetch(t));case 2:return a=s.sent,s.next=5,i.a.awrap(a.blob());case 5:return n=s.sent,s.next=8,i.a.awrap(f.a.loadAsync(n));case 8:return r=s.sent,o=[],r.forEach((function(e,t){e.endsWith(".opus")&&o.push(t)})),s.next=13,i.a.awrap(Promise.all(o.map((function(t){return p(e,t)}))));case 13:return s.abrupt("return",s.sent);case 14:case"end":return s.stop()}}))})(N,"./samples.zip").then((function(e){n(e)}),(function(e){throw alert("Failed to load samples, sorry!\n".concat(e)),e}))}),[]),r.a.useEffect((function(){(function(e,t){var a,n,r;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i.a.awrap(fetch(t));case 2:return a=o.sent,o.next=5,i.a.awrap(a.arrayBuffer());case 5:return n=o.sent,o.next=8,i.a.awrap(e.decodeAudioData(n));case 8:return r=o.sent,o.abrupt("return",{name:"sample",audioBuffer:r});case 10:case"end":return o.stop()}}))})(N,"./convolution/".concat(u,".opus")).then((function(e){b(e)}))}),[u]),void 0===a?r.a.createElement("div",null,"Loading samples..."):r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Ikuinen Webbikoodaus"),r.a.createElement(O,{convolutionSample:d,convolutionGain:k,dryGain:Z,speed:V,ctx:N,samples:a}),null===a||void 0===a?void 0:a.length," samples loaded. Hit the button to play.",r.a.createElement("br",null),d?r.a.createElement(x,{label:"Ambience",suffix:r.a.createElement("select",{value:u,onChange:function(e){return l(e.target.value)}},w.map((function(e){var t=Object(c.a)(e,2),a=t[0],n=t[1];return r.a.createElement("option",{key:a,value:a},n)}))),type:"range",min:0,max:5,step:.1,value:k,onChange:function(e){return R(e.target.valueAsNumber)}}):null,r.a.createElement(x,{label:"Speed",type:"range",min:.02,max:4,step:.1,value:V,onChange:function(e){return g(e.target.valueAsNumber)}}),r.a.createElement(x,{label:"Volume",type:"range",min:0,max:2,step:.1,value:Z,onChange:function(e){return C(e.target.valueAsNumber)}}),"Original content from ",r.a.createElement("a",{href:"https://webbidevaus.fi/"},"Webbidevaus")," ","(CC BY-NC).",r.a.createElement("br",null),"Code by @akx (",r.a.createElement("a",{href:"https://akx.github.io"},"Github"),","," ",r.a.createElement("a",{href:"https://twitter.com/akx"},"Twitter"),").")};s.a.render(r.a.createElement(G,null),document.getElementById("root"))},64:function(e,t){e.exports="data:image/png;base64,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"},66:function(e,t,a){e.exports=a(139)},71:function(e,t,a){},72:function(e,t,a){},78:function(e,t){},80:function(e,t){}},[[66,1,2]]]);
//# sourceMappingURL=main.688e7b15.chunk.js.map